<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
    <style>
        .box {
            width: 30px;
            height: 30px;
            border-radius:50% ;
            background-color: red;
            position: absolute;
            left: 25px;
            top: 25px;
            /* transform: */
        }
        .box2{
            width: 80px;
            height: 80px;
            border-radius: 100%;
            background-color:blue;
            position: relative;
            
        }
    </style>
</head>

<body>
    <div id="app">
        <!-- 
            如果开发人员想要自定义一些复杂的动画效果,可以使用
            transition / transition-group 提供的动画钩子
         -->
         <div class="box2"></div>
        <transition @before-enter="beforeEnterHandel" @enter="enterHandel" @after-enter="afterEnterHandel">
            <div class="box" v-show="show"></div>
            
        </transition>

        <button @click="show = !show">click</button>
    </div>

    <script>
        new Vue({
            el: '#app',
            data: {
                show: false
            },
            methods: {
                // 本身vue操作虚拟dom,尽量避免使用dom操作
                // 在动画钩子函数中vue会将动画元素作为参数传入到钩子函数内
                beforeEnterHandel(el) {
                    console.log('动画开始了', el);
                    el.style.transform = 'translate3d(400px,200px,0)'
                },
                // 动画正在执行的钩子函数,有一个参数二done,表示开发者自定义的复杂动画样式执行完毕
                // 如果不设置done他会以第一个过渡结束自动执行
                enterHandel(el, done) {
                    // 强制刷新页面,等vue渲染元素
                    // 方法一
                    // 让浏览器获取当前元素的某些样式值,会让浏览器顺便刷新ui渲染
                    el.offsetHeight
                    // 方法二
                    // setTimeout(() => { }, 30)
                    let step = 0

                    el.ontransitionend = function () {
                        // let self = this
                        step++
                        if (step == 1) {

                            console.log(1111);
                            el.style.transition = "all 0.1s linear"
                            el.style.transform = 'scaleX(0.7)'
                        }
                        else if (step == 2) {
                            console.log(222);
                            el.style.transition = "all 0.1s linear"
                            el.style.transform = 'scaleX(1.2)'
                        }
                        else if (step == 3) {
                            console.log(333);
                            el.style.transition = "all 0.1s linear"
                            el.style.transform = 'scaleX(0.8)'
                        }
                        else if (step == 4) {
                            console.log(444);
                            el.style.transition = "all 0.1s linear"
                            el.style.transform = 'scaleX(1)'
                        }
                        else if (step == 5) {
                            console.log(555);
                            el.style.transition = "all 0.1s linear"
                            el.style.transform = 'scaleX(0.8)'
                        }
                        else {
                            done()
                        }

                    }
                    el.style.transition = "all 0.5s linear"
                    el.style.transform = 'translate3d(0,0,0)'

                    console.log('动画执行中', el);
                },
                afterEnterHandel(el) {
                    console.log('动画结束中', el);
                    el.ontransitionend = null
                }
            }
        })
        console.log(++[[]][+[]]+[+[]]);
    </script>
</body>

</html>